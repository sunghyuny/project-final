<!DOCTYPE html>
{% include 'Navbar.html'%}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step4 활동 선택 | Travel Plan</title>
    <style>
        .progress{
            display: flex;
            align-items: center;
            justify-content: center;
            width: 1550px;
            overflow-x: hidden;
            margin: 0 auto;
        }

        .Fill_Circle{
            width: 100px;
            height: 100px;
            background: #2295FF;
            border: 2px solid #2295FF;
            border-radius: 50%;
            color: white;
            text-align: center;
            font-size: 21px;
            font-weight: bold;
            display: inline-block ;
            margin: 30px;
            position: relative;
            z-index: 2;
        }

        .Fill_Circle2{
            width: 100px;
            height: 100px;
            background: #2295FF;
            border: 2px solid #2295FF;
            border-radius: 50%;
            color: white;
            text-align: center;
            font-size: 21px;
            font-weight: bold;
            display: inline-block ;
            margin: 30px;
            position: relative;
            z-index: 2;
        }

        .Fill_Circle2>p {
            margin-top: 35px;
        }

        .Fill_Circle2>a{
            text-decoration: none;
            color: white;
        }

        .Circle{
            width: 100px;
            height: 100px;
            background-color: white;
            color:#2295FF;
            border: 3px solid #2295FF;
            border-radius: 50%;
            text-align: center;
            font-size: 21px;
            font-weight: bold;
            display: inline-block;
            position: relative;
            margin: 30px;
            z-index: 2;
        }

        .Circle>p {
            margin-top: 35px;
        }

        .Circle>a{
            text-decoration: none;
            color: #2295ff;
        }

        .Fill_Circle> a> p {
            margin-top: 20px;
        }

        .Fill_Circle2> a> p {
            margin-top: 25px;
        }

        .Circle> a> p {
            margin-top: 30px;
        }

        .Circle_Line {
            width: 700px;
            color: #2295FF;
            border: 2px solid;
            position : absolute;
            z-index: 1;
        }

        .contents {
            width: 1550px;
            overflow-x: hidden;
            margin: 0 auto;
        }

        .select_filter2 {
            border: 1px solid #d7d7db;
            padding: 16px;
            border-radius: 4px;
            float: left;
            width: 150px;
            height: 353px;
            clear: both;
            margin-top: 20px;
            margin-left: 200px;
            padding-top: -20px;
            margin-bottom: 2000px;
        }

        .filter_butitle {
            font-size: 16px;
            font-weight: bold;
        }

        .locate_list{
            width: 1080px;
            border: 1px solid #d7d7db;
            display: flex;
            margin-left: 12rem;
            padding: 20px;
            box-shadow: 2px 2px 2px #d7d7db;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .locate_list>ul>li{
            list-style: none;
            display: inline-block;
            font-size: 16px;
            margin-right: 2.1rem;
            margin-left: 2rem;
        }

        .page_title{
            text-align: center;
            color: #2295FF;
            font-size: 24px;
            font-weight: bold;
        }

        #contents_Line{
            width: 69.9rem;
            margin: 0;
            margin-left: 12rem;
            color: #2295FF;
            border: 2px solid;
        }

        .select_location {
            margin-top: 20px;
            margin-left: 50px;
            margin-bottom: 100px;
            font-size: 21px;
            font-weight: bold;
        }

        .activity_menu {
            margin-top: -50px;
            margin-left: 470px;
        }

        .menu_list{
            display:inline-block;
        }

        .active_category{
            list-style: none;
            display: inline-block;
            border: 1px solid;
            border-radius: 30px;
            font-size: 16px;
            padding: 5px;
            padding-left: 35px;
            padding-right: 35px;
            margin-right: 2rem;
            margin-top:3rem;
            margin-bottom:10px;
            color: black;
        }

        .activity_list_content{
            width: 800px;
            height: auto;
            display: flex;
            float: center;
        }

        .activity_list{
            width: 900px;
            margin: auto;
        }

        .activity {
            display: inline-block;
            width: 770px;
            height: 200px;
            margin-right: 10px;
            border: 1px solid #d7d7db;
            padding: 16px;
            margin-left: 90px;
            margin-bottom: 20px;
            border-radius: 4px;
        }

        .act_title {
            font-size: 21px;
            font-weight: bold;
            display: inline-block;
            margin: 0 ;
            margin-top: 10px;
         }

         .act_locate, .act_time, .act_num {
            margin-top: -20px;
            font-size: 16px;
            color: #8F8F8F;
            margin-top: 10px;
        }

        .act_img {
            width: 400px;
            height: 200px;
            float: left;
            margin: 0px 10px 15px 0px;
            border-radius: 4px;
            display: flex;
        }

        .act_mainmenu {
            font-weight: bold;
        }

        .act_check {
            width: 50px;
            height: 50px;
            float: right;
            margin-right: 20px;
            margin-bottom: 200px;
        }

        .next_btn {
            background-color: #2295FF;
            border: 0;
            padding: 10px;
            border-radius: 4px;
            color: white;
            align-items: center;
            align-content: center;
            width: 85px;
            height: 45px;
            margin-left: 500px;
            margin-top: 5px;
            margin-bottom: 5px;
            display: flex;
            float: right;
            justify-content: center;
            align-content: center;
        }

        .fav_icon {
            font-size: 30px;
            cursor: pointer;
            color: #ccc;
            display: flex;
            float: right;
        }

        .fav_icon.fav {
            color: red;
        }
    </style>
</head>
<body>
    <div>
        <div class="progress">
            <div class='Fill_Circle2'>
                <a href="/planner/"><p>기간/<br>인원</p></a>
            </div>
            <div class='Fill_Circle2'>
                <a href="/planner/plan1/"><p>여행지</p></a>
            </div>
            <div class='Fill_Circle2'>
                <a href="/planner/plan2/"><p>숙소</p></a>
            </div>
            <div class='Fill_Circle2'>
                <a href="/planner/plan3/"><p>활동</p></a>
            </div>
            <div class='Circle'>
                <a href="/planner/plan4/"><p>요약</p></a>
            </div>
            <hr class="Circle_Line"></hr>
        </div>

        <div class='contents'>
            <p class='page_title'>활동 선택</p>
            <hr id="contents_Line"></hr>
            <input type="text" class='locate_list' placeholder="식당, 경관, 체험, 전시 등 가고 싶은 곳을 검색해 보세요">

            <div class="content">
                <div class="select_filter2">
                    <div class="search_bufilter2">
                        <p class="filter_butitle">기간/인원</p>
                        <br>
                        <p class="filter_butitle">여행지</p>
                        <br>
                        <p class="filter_butitle">숙소</p>
                        <br>
                        <p class="filter_butitle">활동</p>
                        <p id="selected_activities"></p>
                    </div>
                </div>
                <span class="select_location"></span>
                <div class='activity_menu'>
                    <ul class='menu_list'>
                        <li class="active_category">식당</li>
                        <li class="active_category">경관</li>
                        <li class="active_category">체험</li>
                        <li class="active_category">전시</li>
                        <li class="active_category">즐겨찾기</li>
                    </ul>
                </div>

                <div class="activity_list_content">
                    <!-- 폼을 감싸는 div를 추가 -->
                    <form action="/planner/plan3/" method="post">
                        {% csrf_token %}
                        <div class="activity_list">
                            {% if activities %}
                                {% for activity in activities %}
                                <div class="activity">
                                    <img class="act_img" src="{{ activity.photo.url }}" alt="{{ activity.name }}"/>
                                    <label for="activity_{{ activity.id }}" class="activity_label">
                                        <p class="act_title">{{ activity.name }}</p>
                                        <p class="act_location">{{ activity.location }}</p>
                                        <p class="act_time">운영시간: {{ activity.time }}</p>
                                        <p class="act_price">대표: {{ activity.price }}원</p>
                                        <p class="act_num">{{ activity.telephone }}</p>
                                        <input type="checkbox" name="selected_activity_id" class="act_check" value="{{ activity.id }}" onchange="updateActivitySelection()">
                                    </label>
                                </div>
                                {% endfor %}
                            {% else %}
                                <p>활동이 없습니다</p>
                            {% endif %}
                        </div>

                        <button type="submit" class="next_btn">다음</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
        function updateActivitySelection() {
            const checkedActivities = document.querySelectorAll('.act_check:checked');
            let selectedActivitiesNames = [];
            checkedActivities.forEach((checkbox) => {
                const activityContainer = checkbox.closest('.activity');
                const activityName = activityContainer.querySelector('.act_title').textContent;
                selectedActivitiesNames.push(activityName);
            });

            const activitiesDisplay = document.getElementById('selected_activities');
            if(selectedActivitiesNames.length > 0) {
                activitiesDisplay.innerHTML = selectedActivitiesNames.join('<br>');
            } else {
                activitiesDisplay.innerHTML = '선택된 활동 없음';
            }
        }
    </script>
</body>
</html>
